<div class="app-container">
  <header>
    <mat-toolbar color="primary" class="toolbar-responsive">
      <div class="logo-container">
        <img
          class="logo"
          src="assets/images/logo_blanco.png"
          height="52"
          alt="Logo de la aplicaci贸n"
        />
        <h1 class="app-title"><span>Chapa tu aula! </span></h1>
      </div>
      <nav aria-label="Opciones principales" class="nav-buttons">
        <button
          (click)="exportCursos()"
          mat-raised-button
          class="op-button"
          aria-label="Exportar cursos"
          color="warn"
        >
          <div class="button-content">
            <mat-icon aria-hidden="true" class="button-icon">upload</mat-icon>
            <span class="button-text">Exportar</span>
          </div>
        </button>
        <button
          (click)="importCursos()"
          mat-raised-button
          class="op-button"
          aria-label="Importar cursos"
          color="warn"
        >
          <div class="button-content">
            <mat-icon aria-hidden="true" class="button-icon">download</mat-icon>
            <span class="button-text">Importar</span>
          </div>
        </button>
        <button
          (click)="openLogin()"
          mat-raised-button
          class="op-button"
          aria-label="Iniciar sesi贸n"
          color="warn"
        >
          <div class="button-content">
            <mat-icon aria-hidden="true" class="button-icon">login</mat-icon>
            <span class="button-text">Login</span>
          </div>
        </button>
      </nav>
    </mat-toolbar>
  </header>
  <main class="content-wrapper">
    <div *ngIf="cursos == null" class="empty-courses">
      <p class="empty-message">
        No hay cursos registrados actualmente, has click en el bot贸n de abajo
        para agregar tus cursos! 
      </p>
      <div class="arrow-container">
        <mat-icon class="arrow" aria-hidden="true">keyboard_double_arrow_down</mat-icon>
      </div>
    </div>
    <cdk-virtual-scroll-viewport
      *ngIf="cursos != null"
      itemSize="7"
      class="virtual-scroll"
    >
      <div
        class="course-container"
        *cdkVirtualFor="let carrera of cursos | keyvalue"
      >
        <h2 [@slideRight]="animationStates[carrera.key] || 'initial'">
          {{ carrera.key }}
        </h2>
        <div class="plan-container" *ngFor="let plan of carrera.value | keyvalue">
          <h3
            [@slideRight]="animationStates[carrera.key + plan.key] || 'initial'"
          >
            Plan {{ plan.key }}
          </h3>
          <mat-card
            class="course-card"
            *ngFor="let ciclo of plan.value | keyvalue"
          >
            <mat-card-header>
              <mat-card-title
                [@slideRight]="
                  animationStates[carrera.key + plan.key + ciclo.key] ||
                  'initial'
                "
              >
                <h1
                  *ngIf="ciclo.key != 'Electivo'"
                  class="cycle-title"
                >
                  Ciclo 掳{{ ciclo.key }}
                </h1>
                <h1
                  *ngIf="ciclo.key == 'Electivo'"
                  class="cycle-title"
                >
                  {{ ciclo.key }}s
                </h1>
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div *ngFor="let curso of ciclo.value; let last = last">
                <div class="course-item">
                  <div
                    class="course-details"
                    [@slideRight]="
                      animationStates[
                        carrera.key + plan.key + ciclo.key + curso.curso
                      ] || 'initial'
                    "
                  >
                    <p class="course-name">{{ curso.curso }}</p>
                    <p class="course-professor">{{ curso.profesor }}</p>
                    <p class="course-section">Secci贸n {{ curso.seccion }}</p>
                    <h5 class="course-room">Sal贸n: NP-101</h5>
                  </div>
                  <div class="course-actions">
                    <button
                      (click)="deleteCurso(curso)"
                      mat-mini-fab
                      class="delete-button"
                      color="warn"
                      aria-label="Eliminar curso"
                    >
                      <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                </div>
                <mat-divider *ngIf="!last" class="course-divider"></mat-divider>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </cdk-virtual-scroll-viewport>
    
    <!-- Floating action button positioned over the scroll view -->
    <button (click)="openCursos()" class="floating-add-button" mat-fab color="warn" aria-label="Agregar curso">
      <mat-icon aria-hidden="true">add</mat-icon>
    </button>
  </main>
</div>
